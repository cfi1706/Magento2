## Create custom configuration field with Magento 2

Stores &gt; Configuration:

Create the file :

`app/code/Test/Jobs/etc/adminhtml/system.xml`

* "tab" node create a new tab. Attribute "sortOrder" allow to change position on the list.

* "section" node add a new element to our tab.

* "group" node create a group of field on the form.

* "field" set the "select" type, and define the label and the comment. - "source\_model" allow to retrieve the array of values for the select. We use a native object from Magento which return a "Yes/No" array.

> You can add some section / group / field in Magento native tabs / sections / groups. For example, you can add a new group with some new field inside the "Catalog" tab and "Catalog" section.

## Manage config scope

The attributes : showInDefault, showInWebsite, showInStore

Magento will retrieve the config value like this :

* If the field has got store view scope \(showInStore\), and a value is defined, we return it

* Else if the field has got website scope \(showInWebsite\), and a value is defined, we return it

* Else we return the default scope value \(showInDefault\)

&gt; It’s an example of the configuration creation. You can change it if you want, and have fields only with the store view scope !

## ACL creation

File :

`app/code/Test/Jobs/etc/acl.xml`

```xml
<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:Acl/etc/acl.xsd">
    <acl>
        <resources>
            <resource id="Magento_Backend::admin">
                <!-- Admin menu -->
                <resource id="Test_Jobs::job_head" title="Jobs" sortOrder="100">
                    <resource id="Test_Jobs::department" title="Departments" sortOrder="10">
                        <resource id="Test_Jobs::department_save" title="Save Department" sortOrder="10"/>
                        <resource id="Test_Jobs::department_delete" title="Delete Department" sortOrder="20"/>
                    </resource>
                    <resource id="Test_Jobs::job" title="Jobs" sortOrder="20">
                        <resource id="Test_Jobs::job_save" title="Save Job" sortOrder="10"/>
                        <resource id="Test_Jobs::job_delete" title="Delete Job" sortOrder="20"/>
                    </resource>
                </resource>
                <!-- Admin config -->
                <resource id="Magento_Backend::stores">
                    <resource id="Magento_Backend::stores_settings">
                        <resource id="Magento_Config::config">
                            <resource id="Test_Jobs::jobs" title="Jobs Section"/>
                        </resource>
                    </resource>
                </resource>
            </resource>
        </resources>
    </acl>
</config>
```

## Add default config value on Magento 2 module

Create the file :

`app/code/Test/Jobs/etc/config.xml`

```xml
<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Store:etc/config.xsd">
    <default>
        <jobs>
            <department>
                <view_list>1</view_list>
            </department>
        </jobs>
    </default>
</config>
```

- "default" node say it’s the default scope.

- The next nodes are "section", "group" and field name set on system.xml

- On the field node, we put our default value: 1

You can set default value for website and store view scope :

```xml
<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Store:etc/config.xsd">
    <default>
        <jobs>
            <department>
                <view_list>1</view_list>
            </department>
        </jobs>
    </default>
 
    <websites>
        <websitecode>
            <jobs>
                <department>
                    <view_list>1</view_list>
                </department>
            </jobs>
        </websitecode>
    </websites>
 
    <stores>
        <storeviewcode>
            <jobs>
                <department>
                    <view_list>1</view_list>
                </department>
            </jobs>
        </storeviewcode>
    </stores>
</config>
```

## Update programatically config value with Magento 2



